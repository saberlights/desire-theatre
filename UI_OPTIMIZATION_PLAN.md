# UI和帮助系统优化方案

## 一、文本 vs 图片使用规则

### 📸 应该使用图片的场景
1. **复杂命令列表** - /帮助 完整命令列表
2. **多层次分类内容** - 动作分类、服装列表、道具列表
3. **详细状态显示** - /看 完整属性面板
4. **游戏说明和引导** - /说明 新手教程
5. **数据对比和统计** - 周总结、属性对比
6. **结局展示** - 结局画面和描述
7. **季节/节日信息展示** - 美观的日历和节日说明
8. **职业路线图** - 职业晋升路径可视化

### 📝 应该使用文本的场景
1. **简单状态查询** - /快看 快速属性
2. **单一反馈消息** - 互动成功/失败提示
3. **错误提示和警告** - 参数错误、条件不足
4. **确认对话框** - 重开确认、二次确认
5. **简短帮助提示** - 参数说明、使用方法
6. **实时互动反馈** - 属性变化、经验获得
7. **事件选择** - 随机事件的选项列表（文本更快）

### 🎨 混合输出场景
1. **互动流程** - 先发图片（场景/状态），再发文本（剧情/对话）
2. **教程引导** - 图片教程 + 文本提示
3. **成就解锁** - 文本通知 + 图片成就卡

---

## 二、帮助系统改进

### 2.1 当前问题
- ❌ v2.0新系统（季节、职业、事件）没有帮助说明
- ❌ 帮助内容散落在多个命令中，不够集中
- ❌ 缺少新手友好的引导流程
- ❌ 没有快速参考卡片

### 2.2 改进方案

#### ✅ 添加v2.0系统帮助
```
/帮助 v2  或  /帮助 2.0  或  /帮助 新功能
显示：
- 四季时间系统
- 职业养成系统
- 随机事件系统
- 42天周期说明
- 新增结局介绍
```

#### ✅ 新手引导流程
```
首次使用 /开始 时触发：
1. 欢迎消息
2. 核心概念（九维属性、进化阶段）
3. 基础命令（看、快看、帮助）
4. 推荐第一步（/早安或/牵手）
5. 提示查看完整教程（/说明）
```

#### ✅ 快速参考命令
```
/快速参考  或  /速查
生成一张简化的命令速查卡：
- 核心命令（5个）
- 常用互动（10个）
- 系统功能（5个）
- 紧急帮助（/帮助）
```

#### ✅ 情境帮助
```
根据玩家当前状态动态提示：
- 首次互动 → 提示 /推荐
- 达到新阶段 → 提示解锁内容
- 互动次数用完 → 提示 /明日
- 可以晋升 → 提示 /晋升
```

---

## 三、具体实施计划

### 阶段1：补充v2.0帮助内容（优先）
- [ ] 在 status_commands.py 中添加 `_show_v2_help()` 方法
- [ ] 修改 /帮助 命令支持 `/帮助 v2`
- [ ] 添加四季、职业、事件的详细说明

### 阶段2：优化新手引导
- [ ] 修改 DTStartGameCommand，添加引导消息
- [ ] 创建首次游戏检测
- [ ] 添加阶段性引导提示

### 阶段3：创建快速参考
- [ ] 添加 /快速参考 命令
- [ ] 生成简化的命令卡片

### 阶段4：情境帮助
- [ ] 在关键时刻添加智能提示
- [ ] 根据角色状态推送相关帮助

---

## 四、命令输出设计规范

### 图片输出规范
```python
# 使用场景：复杂信息、多层级内容
try:
    from ..utils.help_image_generator import HelpImageGenerator
    img_bytes, img_base64 = HelpImageGenerator.generate_XXX_image(...)
    await self.send_image(img_base64)
    return
except Exception as e:
    # 降级到文本
    pass
```

### 文本输出规范
```python
# 简短反馈（1-3行）
await self.send_text("✅ 操作成功")

# 结构化信息（使用分隔符）
message = """
━━━ 标题 ━━━
内容...
💡 提示
"""
```

### 混合输出规范
```python
# 先图后文
await self.send_image(status_image)  # 状态图
await self.send_text("💡 提示文字")   # 操作提示

# 分段输出
await self.send_text("🎬 场景描述...")
await self.send_text("💬 角色对话...")
await self.send_image(effect_image)  # 效果展示
```

---

## 五、优化重点

### 5.1 减少信息过载
- ❌ 一次显示所有50+命令 → ✅ 分类显示、按需查询
- ❌ 完整属性面板 → ✅ 快看（核心属性）+ 看（完整）

### 5.2 提高查询效率
- ✅ /快看 - 2秒内看到核心数据
- ✅ /帮助 <类别> - 定向查询
- ✅ /速查 - 一图搞定常用命令

### 5.3 增强新手友好度
- ✅ 首次引导
- ✅ /推荐 AI推荐下一步
- ✅ /快速互动 - 不知道做什么时的选择
- ✅ 情境提示 - 智能推送相关帮助

### 5.4 视觉美化
- ✅ 图片输出有背景、格式化
- ✅ 文本使用emoji和分隔符
- ✅ 状态用进度条可视化

---

## 六、优先级

### P0 - 立即实施
1. 添加v2.0系统帮助（季节、职业、事件）
2. 优化 /开始 的引导消息
3. 添加 /快速参考 命令

### P1 - 近期实施
4. 情境智能提示
5. 优化帮助分类

### P2 - 后续优化
6. 图片生成器增强
7. 动态教程系统
